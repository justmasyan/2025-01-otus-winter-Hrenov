<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>List of all authors</title>

    <script>
        function findAllAuthors() {
            const authorsContainer = document.getElementById("authorsContainer")

            fetch("api/authors")
            .then(rawResponse => rawResponse.json())
            .then(authors => {
                document.getElementById("authorsContainer").appendChild(tableFor(authors))
            })
        }
    </script>

    <script>
        function hideAuthors() {
            document.getElementById("authorsContainer").innerHTML = ''
        }
    </script>

    <script>
        function tableFor(authors) {
            let table = document.createElement("table")
            table.setAttribute('border', '1')

            //thead
            let thead = document.createElement('thead')
            let theadRow = document.createElement('tr')

            const theadDataLol = ['ID', 'FullName']
            theadDataLol.forEach(text =>  {
              let theadData = document.createElement('th')
              theadData.innerHTML = text
              theadRow.appendChild(theadData)
            })

            thead.appendChild(theadRow)

            //tbody

            let tbody = document.createElement('tbody');

            authors.forEach(function(author) {
                let tr = document.createElement('tr')

                let tdId = document.createElement('td')
                tdId.innerHTML = author.id
                let tdFullName = document.createElement('td')
                tdFullName.innerHTML = author.fullName

                tr.appendChild(tdId)
                tr.appendChild(tdFullName)

                tbody.appendChild(tr)
            })

            table.appendChild(thead)
            table.appendChild(tbody)
            return table
        }
    </script>
</head>

<body onload="findAllAuthors()">

<h3>Authors:</h3>

<p id="authorsContainer"></p>

<a href="authors.html" th:href="@{/authors}"><button type="button">Refresh</button></a>
<a href="main_page.html" th:href="@{/}"><button type="button">Back</button></a>

</body>
</html>

